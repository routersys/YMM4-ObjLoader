<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:settings="clr-namespace:ObjLoader.ViewModels.Settings"
                    xmlns:u="clr-namespace:ObjLoader.Utilities"
                    xmlns:ymm="clr-namespace:YukkuriMovieMaker.Controls;assembly=YukkuriMovieMaker.Controls"
                    xmlns:l="clr-namespace:ObjLoader.Localization">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="../Converters.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    <u:BindingProxy x:Key="Proxy" Data="{Binding}"/>

    <DataTemplate DataType="{x:Type settings:MaterialRangeItemViewModel}">
        <StackPanel Margin="0,0,0,5">
            <TextBlock Text="{Binding Label}" Foreground="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}"/>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="50"/>
                </Grid.ColumnDefinitions>
                <Slider Grid.Column="0" Minimum="{Binding Min}" Maximum="{Binding Max}" Value="{Binding Value, Delay=16}" Margin="0,2,5,0" SmallChange="{Binding Step}" LargeChange="0.1" IsMoveToPointEnabled="True"/>
                <TextBlock Grid.Column="1" Text="{Binding Value, StringFormat=F2}" HorizontalAlignment="Right" Foreground="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}"/>
            </Grid>
        </StackPanel>
    </DataTemplate>

    <DataTemplate DataType="{x:Type settings:MaterialColorItemViewModel}">
        <StackPanel Margin="0,0,0,5">
            <TextBlock Text="{Binding Label}" Foreground="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}"/>
            <ymm:ColorPicker Value="{Binding Value}" Margin="0,2,0,0" Height="26"/>
        </StackPanel>
    </DataTemplate>

    <DataTemplate DataType="{x:Type settings:MaterialGroupViewModel}">
        <Expander IsExpanded="{Binding IsExpanded}" Margin="0,0,0,5">
            <Expander.Header>
                <Grid Width="{Binding RelativeSource={RelativeSource AncestorType=Expander}, Path=ActualWidth}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="30"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="{Binding Title}" FontWeight="Bold" VerticalAlignment="Center" Foreground="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}"/>
                    <Button Grid.Column="1" Command="{Binding ResetGroupCommand}" ToolTip="{x:Static l:Texts.Tip_ResetGroup}" Margin="0,0,5,0" Background="Transparent" BorderBrush="Transparent">
                        <Path Data="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z" Fill="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}" Width="12" Height="12" Stretch="Uniform"/>
                    </Button>
                </Grid>
            </Expander.Header>
            <ItemsControl ItemsSource="{Binding Items}" Margin="10,5,5,5"/>
        </Expander>
    </DataTemplate>

    <DataTemplate x:Key="PartItemTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Image Grid.Column="0" Source="{Binding Thumbnail}" Width="48" Height="48" Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality"/>
            <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="10,0,5,0">
                <TextBlock Text="{Binding Name}" FontWeight="SemiBold" FontSize="13" TextTrimming="CharacterEllipsis"/>
                <TextBlock Text="{Binding Detail}" FontSize="11" Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" Margin="0,2,0,0"/>
            </StackPanel>
        </Grid>
    </DataTemplate>

    <Style x:Key="PartItemContainerStyle" TargetType="ListViewItem">
        <Setter Property="Tag" Value="{Binding DataContext, RelativeSource={RelativeSource AncestorType=ListView}}"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="Margin" Value="0"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="ContextMenu">
            <Setter.Value>
                <ContextMenu>
                    <MenuItem Header="{x:Static l:Texts.SplitWindow_AddToLayer}" 
                              Command="{Binding PlacementTarget.Tag.AddToLayerCommand, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                              CommandParameter="{Binding}"/>
                </ContextMenu>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
